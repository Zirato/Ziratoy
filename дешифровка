#include <iostream>
#include <windows.h>
#include <vector>
#include <string>
#include <random>
#include <chrono>
using namespace std;

int main()
{
    SetConsoleCP(1251);
    SetConsoleOutputCP(1251);
    string s, ss, sss;
    vector <string> sv(10);
    sv[0] = "АпЦК)ХГв8ЖRaДь<Э!CЙvY>gБЛъР^BVж 6{ЧGЪPbУнмсxЬ\"r0J4йеwkyZВСNlШшЗ5X/AeхUjfQqpцt-;?юWnщMИкEЫр(zзLiтdаcD721&О3oПhои\'чдЯ|эЕл_+Oы`,фmЮ=T#яЩ$H.]НуuТs[IK9М*F@%бS\\г:Ф}~";
    sv[1] = "АЙ<ПИ@ыОшвуЪВ)iLwеM=УetК!ШCю_-qБя/йUаz670JД4a$тЕjмY\'Ф^m>ГНy кжrHR5Zlц[2+dъсKf?бЮv\"чOнРxп,FXAg1D:ЦPЛХ;рkWх`%\\|VpЩoьbЯ.S]ЗBЧЫhЖNu3Ьщ{эQиз#cгnоGE9*МТд8IС&ЭлфTs(}~";
    sv[2] = "А_ДBп5нИWЙТбzjщsЮ\"%Уfсxg{!СaивU*@8эЯrE=?,bмFtБЛQю1wх2йНЭОВ:ыЖV&]фiYRГ\'уDжЦКЫTJ>^I#Ь6keKз;[ЗGSLl(е`\\дXЕ.qoт|чPc$)ЪШvшA7yd-Фuяа/Zоь<ЩONMpМРhH9ъ43П Cлр0цгкХ+mnЧ}~";
    sv[3] = "9еIщжб\"ц_Г?ЛыФlя,А3+Vi;ьKШRv4zн/hПМt<jЗЙCСЕYгb#:ЦсТLЩИшвДaОSэeOw%*@DoчоXдcdзи&Э2EA.\')$1йУ6РЮ-sК`а(pygmп{8NЧ~мfНюуn}^rВUZMquЬ0=JЖ7[5>|лkхHP\\ TрЯЪFкЫХ]BтGxQ!WфБъ";
    sv[4] = ";QEъ|Sеш[7Жp)нв<WdZmUЮУз\'1хz6Й&u/ACЯD\"ШsV_ХRИibvпHР3оOдhЬIю@KблМ4КТLFкДаЗaВрщfсw0eй{+rФэx*lG`2ь=}ЦMц$(ЕXЛ>kфg^Чq.!ч% coы?jn,:Н-J5ОЫ#\\СBжyЩм89]tЪуГYTNЭАБПPяи~гт";
    sv[5] = "НOк\'J(QщLfMаЭЫеY2DЩ@У,мФВS&Ъ1#Z{rh !Зфv0ЙnoXAз/И58Ю~яj*)]ХРd4Спs\"azЬC:|гeBЧ6уE;.сЯUА7RоОМшрцmy=чъH-ьWЦК$pKГБFI<ПЖx}ы3q`NлвД_PTwb%^kдтюVй>?+9жЕlGэбЛc[gШituихн\\Т";
    sv[6] = ",;_Ш\\Юц2ФGйhwS=j$TyбYkaы6|уW?iБз!ЫАu~t7Qsщ4(lCIgЗГ^1лOpвОV93Я+>Еv#ХгfяmсЛ-ЩqКь[нKxюЧИТжНмcP`ит.%RzXУъMчПх]\'JСDЦLп{nфBeF&шд@/E*Uкr8\"рМHoе}ЭbРN)оZЖAЬ:dД0а<эЙЪ 5В";
    sv[7] = "Ш<н\\ЮЬхVэ?ЕЩ%ЙCA&1йGХu9,vыМиw]QBц.)Ж {ГмLFzHfPЫНn~Э[ВЯ6p(БПтOеО\"ЗДс;\'жзаWSTgUdвщZti5бдKaфYЪmлk-К7_=>xjьЛСкРИ}l#ЧrIMoD4qгу@чУя`sN*пЦ^!XФJe:о+$chрb/EА|R0ю82y3шТъ";
    sv[8] = ",):Z\"kпм{ыаЛ5ЦgV=щзЙВФM;РхЫ`-bс|YЗИi*йК](Е.0ю>Б/НП_ЧХд9WнsфЩI\'XtGи!eШjvуn<SДГ#AтRz1@fQьш 28яB&ОоmpdoкАв~wcu4ълТPгLМЭE?эЮOбеhУya^[3ЯЪ+qTЬц\\J}6rNжС7K$lUЖDHCрxчF%";
    sv[9] = "r%Ай-$8эСЪБtяЫu2тP#е 5иJ4CТкъ\'m1И~vНХ=Mбb?рЧNH.Щ_ыB(`pнжЬQs\\7ГВ)6МlЛЕTiЗ}Дc>;kЭaхУ3ЦVE/A[сцзО9oьeSWП+,щ!Lа0КGгШqЮXOKnп@zЯвд*ZоRYwhчмd^fш{Uю:флgФР|DFjЖ&у]xI\"yЙ<";

    int k, l, f, kl, h = 0;
    getline(cin, sss);
    cin >> kl;
    k = kl / 100; l = ((kl / 10) % 10) + 4; f = (kl % 10) + 3;
    
    ss.resize(sss.length());
    for (int j = 0; j < l; ++j) {
        for (int i = j; i < ss.length(); ) {
            if (j == 0 || j + 1 == l) {
                ss[i] = sss[h];
                h++;
            }
            else {
                int in = i + (l * 2 - 3) - 2 * (j - 1) - 1;
                ss[i] = sss[h];
                h++;
                if (in < ss.length()) {
                    ss[in] = sss[h];
                    h++;
                }
            }
            i = i + (l * 2) - 2;
        }
    }

    int r = 0;
    for (int i = 0; i < ss.length(); ++i) {
        int in;
        if (r % f == 0)
            ++i;
        for (int j = 0; j < 159; ++j) {
            if (sv[k][j] == ss[i]) {
                in = j;
            }
        }
        in = ((in - r) + 159) % 159;
        if (in <= 94) {
            in += 32;
        }
        else {
            in = in - 65 - 95;
        }
        cout << char(in);
        ++r;
    }
}
